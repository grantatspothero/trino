#!/usr/bin/env bash

set -x
set -euo pipefail

file_to_edit="$1"

# Currently, requires GNU sed
sed -i 's/^pick [0-9a-f]\+ \[maven-release-plugin] /# \0/' "${file_to_edit}"

if test ! -z "${PREV_GIT_SEQUENCE_EDITOR:-}"; then
    GIT_SEQUENCE_EDITOR="${PREV_GIT_SEQUENCE_EDITOR}"
else
    GIT_SEQUENCE_EDITOR="$(git config --get --default "$(git var GIT_EDITOR)" sequence.editor)"
fi

exec ${GIT_SEQUENCE_EDITOR} "${file_to_edit}"
